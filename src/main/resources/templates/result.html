<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Google Cloud Vision Results</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
  <h1>Annotations Produced for the Image</h1>
  <table border="1">
    <tr>
      <th>Description</th>
      <th>Score</th>
    </tr>
    <tr th:each="entry : ${annotations}">
      <td>[[${entry.key}]]</td>
      <td>[[${entry.value}]]</td>
    </tr>
  </table>
  <div id="test">

  </div>

  <!--<p>-->
    <!--<img th:src="${imageUrl}"/>-->
  <!--</p>-->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
  <!--一个jquery 是从jsDeliver这个网站中引入的-->
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.0/dist/semantic.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
          crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
          crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
          crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
  <!--ajax-->
  <!--一个jquery 是从jsDeliver这个网站中引入的-->
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.0/dist/semantic.min.js"></script>

  <script>

      var token="[[${token}]]";
      var targetUrl="/test/"+token;
      $(function () {
          $(window).on('load', function () {
              $.ajax({
                  type: "get",
                  url: targetUrl,
                  dataType: "json",
                  success: function (res) {
                      $("#test").html("");
                      for(var i = 0; i<10;i++){
                          $("#test").append('<div class="ui padded vertical segment m-padded-tb-mid"><div class="ui grid"><div class="ten wide column"><h3 class="ui header">' + res['businesses'][i]["name"] + '</h3>' +
                              ' <p>'+ '<b>Country: </b>' + res['businesses'][i]["location"]["country"] + '<br />' + '<b>City: </b>' + res['businesses'][i]["location"]["city"] +  '<br />' +  '<b>State: </b>' + res['businesses'][i]["location"]["state"] + '<br />' +  '<b>Zip code: </b>' + res['businesses'][i]["location"]["zip_code"]+ '<br />' +  '<b>Address: </b>' + res['businesses'][i]["location"]["address1"] + '<br />' +  '<b>Phone Number: </b>' + res['businesses'][i]["phone"]+ '</p> <div class="ui grid"><div class="ten wide column">' +
                              '<iframe src="https://www.google.com/maps/embed?pb=!1m23!1m12!1m3!1d3036.541156209343!2d-79.95886068464749!3d40.441158062077356!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m8!3e3!4m0!4m5!1s0x8834f229dcbd36dd%3A0x4d8b70af2248a0ef!2sFuel+and+Fuddle%2C+212+Oakland+Ave%2C+Pittsburgh%2C+PA+15213!3m2!1d40.441154!2d-79.956672!5e0!3m2!1szh-CN!2sus!4v1540509574584"width="100%" height="115" frameborder="0" style="border:0" allowfullscreen></iframe>' +
                              ' </div><div class="six wide column"><br>' +

                              ' <h4 class = "m-inline-block">User rating :</h4>' + ' ' + '<p class = "m-text-color m-inline-block">' + res['businesses'][i]["rating"] + '</p>' + ' '+ '<i class="fas fa-star m-stars"></i>' + '<br><p>' + res['businesses'][i]["review_count"] + '  '+ '<b>Customer reviews</b>'+ '</p></div></div>' +

                              '<div class="two column ui grid"><div class="ui eleven wide column"><div class="ui mini horizontal link list"><div class="item">' +
                              '<img src="image/user1.jpg" alt="" class="ui avatar image" style="width:30px; height:30px">' +
                              '<div class="content"><div class="header">Qizhou</div></div></div>' +

                              '<div class="item"><i class="calendar icon"></i> 2018-10-25 </div><div class="item"> <i class="eye icon"></i> 5044</div></div></div>' +


                              '<div class="right aligned five wide column"><a href="#" , target="_blank" class="ui teal  label">' + res['businesses'][i]["categories"][0]["title"] + '</a></div></div></div>' +

                              '<div class="six wide column"><a href="#" target="_blank">' +
                              '<img src="'+ res['businesses'][i]["image_url"] + '" alt="" class="ui rounded image" style="width:650px; height:320px">' +
                              '</a></div></div></div>');
                      }



                  },
                  error: function (res) {
                      //  console.log(res);
                  }
              });
          });
      });
  </script>
</body>
</html>
